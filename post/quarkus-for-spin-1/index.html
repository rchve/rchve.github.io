<!doctype html><html lang=en-gb><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><title>Quarkus for Spin - Part 1 - rchve</title><meta name=description content><link rel=icon type=image/x-icon href=https://rchve.github.io/favicon.ico><link rel=apple-touch-icon-precomposed href=https://rchve.github.io/favicon.png><link rel=stylesheet href="https://rchve.github.io/css/style.css?rnd=1592760762"><meta property="og:title" content="Quarkus for Spin - Part 1"><meta property="og:description" content="From some time i wanted to try out Quarkus. Starting with version 1.4 it bought the functionality of command line support. It was good time to start playing with Quarkus for learning and understanding the ecosystem along with native compilation.
In this blog i will create a cli application using Quarkus picocli extension and natively compile to binary.
Getting Started A started project can be created from code.quarkus.io or using the command below"><meta property="og:type" content="article"><meta property="og:url" content="https://rchve.github.io/post/quarkus-for-spin-1/"><meta property="article:published_time" content="2020-06-10T00:00:00+00:00"><meta property="article:modified_time" content="2020-06-10T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Quarkus for Spin - Part 1"><meta name=twitter:description content="From some time i wanted to try out Quarkus. Starting with version 1.4 it bought the functionality of command line support. It was good time to start playing with Quarkus for learning and understanding the ecosystem along with native compilation.
In this blog i will create a cli application using Quarkus picocli extension and natively compile to binary.
Getting Started A started project can be created from code.quarkus.io or using the command below"></head><body><a class=skip-main href=#main>Skip to main content</a><div class=container><header><h1 class=site-header><a href=/>rchve</a></h1><nav><a href=https://rchve.github.io/posts/>Archive</a></nav></header><main id=main tabindex=-1><article class=post><header><h1 class=post-title>Quarkus for Spin - Part 1</h1></header><div class=content><p>From some time i wanted to try out <a href=https://quarkus.io/>Quarkus</a>. Starting with version 1.4 it bought the functionality of command line support. It was good time to start playing with Quarkus for learning and understanding the ecosystem along with native compilation.</p><p>In this blog i will create a cli application using Quarkus picocli extension and natively compile to binary.</p><h4 id=getting-started>Getting Started</h4><p>A started project can be created from <a href=https://code.quarkus.io/>code.quarkus.io</a> or using the command below</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>mvn io.quarkus:quarkus-maven-plugin:1.5.0.Final:create <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>      -DprojectGroupId<span style=color:#f92672>=</span>io.gh.rchve -DprojectArtifactId<span style=color:#f92672>=</span>qlearn <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>      -DprojectVersion<span style=color:#f92672>=</span>1.0.0 -Dextensions<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;picocli&#34;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>      -DclassName<span style=color:#f92672>=</span>io.gh.rchve.qlearn.Main 
</code></pre></div><p>Delete the generated folder (src/test, src/main/docker).</p><p>From pom.xml remove all dependencies except quarkus-picocli.</p><h4 id=creating-top-level-command>Creating Top level command</h4><p>Create class for Top level command</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> io.gh.rchve.qlearn.commands<span style=color:#f92672>;</span>

<span style=color:#f92672>import</span> io.quarkus.picocli.runtime.annotations.TopCommand<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> picocli.CommandLine<span style=color:#f92672>;</span>

<span style=color:#a6e22e>@TopCommand</span>
<span style=color:#a6e22e>@CommandLine.Command</span><span style=color:#f92672>(</span>mixinStandardHelpOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span> version <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;1.0.0&#34;</span><span style=color:#f92672>)</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>QLearnCommand</span> <span style=color:#66d9ef>implements</span> Runnable <span style=color:#f92672>{</span>
  <span style=color:#a6e22e>@Override</span>
  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span><span style=color:#f92672>()</span> <span style=color:#f92672>{}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h4 id=build-and-run-the-command>Build and run the command</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>./mvnw clean package

java -jar target/qlearn-1.0.0-runner.jar -h

__  ____  __  _____   ___  __ ____  ______ 
 --/ __ <span style=color:#ae81ff>\/</span> / / / _ | / _ <span style=color:#ae81ff>\/</span> //_/ / / / __/ 
 -/ /_/ / /_/ / __ |/ , _/ ,&lt; / /_/ /<span style=color:#ae81ff>\ \ </span>  
--<span style=color:#ae81ff>\_</span>__<span style=color:#ae81ff>\_\_</span>___/_/ |_/_/|_/_/|_|<span style=color:#ae81ff>\_</span>___/___/   
2020-06-10 18:45:17,141 INFO  <span style=color:#f92672>[</span>io.quarkus<span style=color:#f92672>]</span> <span style=color:#f92672>(</span>main<span style=color:#f92672>)</span> qlearn 1.0.0 on JVM <span style=color:#f92672>(</span>powered by Quarkus 1.5.0.Final<span style=color:#f92672>)</span> started in 0.333s. 
2020-06-10 18:45:17,162 INFO  <span style=color:#f92672>[</span>io.quarkus<span style=color:#f92672>]</span> <span style=color:#f92672>(</span>main<span style=color:#f92672>)</span> Profile prod activated. 
2020-06-10 18:45:17,162 INFO  <span style=color:#f92672>[</span>io.quarkus<span style=color:#f92672>]</span> <span style=color:#f92672>(</span>main<span style=color:#f92672>)</span> Installed features: <span style=color:#f92672>[</span>cdi, picocli<span style=color:#f92672>]</span>
Usage: &lt;main class&gt; <span style=color:#f92672>[</span>-hV<span style=color:#f92672>]</span>
  -h, --help      Show this help message and exit.
  -V, --version   Print version information and exit.
2020-06-10 18:45:17,275 INFO  <span style=color:#f92672>[</span>io.quarkus<span style=color:#f92672>]</span> <span style=color:#f92672>(</span>main<span style=color:#f92672>)</span> qlearn stopped in 0.004s
</code></pre></div><p>The above run displays the Quarkus banner and info logs. To disable this add the following properties to application.properties</p><pre><code class=language-properties data-lang=properties>quarkus.banner.enabled=false
quarkus.log.level=ERROR
</code></pre><p>Now build and run again.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>./mvnw clean package

java -jar target/qlearn-1.0.0-runner.jar -h
Usage: &lt;main class&gt; <span style=color:#f92672>[</span>-hV<span style=color:#f92672>]</span>
  -h, --help      Show this help message and exit.
  -V, --version   Print version information and exit.
</code></pre></div><p>Output is similar to a cli application.</p><h4 id=build-and-run-the-native>Build and run the native</h4><p>Building a native image uses the <a href=https://www.graalvm.org/>GraalVM</a> to convert the java application to native binary.</p><p>Running the below command to create a binary of Quarkus Application.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>./mvnw clean package -Pnative

./target/qlearn-1.0.0-runner -h
Usage: &lt;main class&gt; <span style=color:#f92672>[</span>-hV<span style=color:#f92672>]</span>
  -h, --help      Show this help message and exit.
  -V, --version   Print version information and exit.
</code></pre></div><h4 id=running-the-application-from-ide>Running the application from IDE</h4><p>The Quarkus application generates the Main class that will be used when running the application. We can provide our own Main class to be able to run from IDE.</p><p>All the below Main class</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> io.gh.rchve.qlearn<span style=color:#f92672>;</span>

<span style=color:#f92672>import</span> io.quarkus.runtime.Quarkus<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>QLearn</span> <span style=color:#f92672>{</span>
  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    Quarkus<span style=color:#f92672>.</span><span style=color:#a6e22e>run</span><span style=color:#f92672>(</span>args<span style=color:#f92672>);</span>
  <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>Now we can run the application from the IDE.</p><p>The code for this step is available at <a href=https://github.com/rchve/qlearn/tree/step-01>https://github.com/rchve/qlearn/tree/step-01</a></p><h4 id=next-steps>Next Steps</h4><p>Add sub commands to the application.</p><h5 id=references>References</h5><ul><li><a href=https://quarkus.io/guides/picocli>Quarkus Picocli</a></li></ul></div><div class=post-info><div class=post-date>2020-06-10</div><div class=post-taxonomies><ul class=post-categories><li><a href=https://rchve.github.io/categories/Development>Development</a></li></ul><ul class=post-tags><li><a href=https://rchve.github.io/tags/java>#Java</a></li><li><a href=https://rchve.github.io/tags/quarkus>#Quarkus</a></li><li><a href=https://rchve.github.io/tags/picocli>#Picocli</a></li><li><a href=https://rchve.github.io/tags/native>#Native</a></li></ul></div></div></article><div class="pagination post-pagination"><div class="left pagination-item"><a href=/post/quarkus-for-spin-2/>Quarkus for Spin - Part 2</a></div><div class="right pagination-item"><a href=/post/hello-world/>Hello</a></div></div><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"d-rchve"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></main><footer><p>Â© rchve, 2020<br>Powered by <a target=_blank href=https://gohugo.io/>Hugo</a>, theme <a target=_blank href=https://github.com/mitrichius/hugo-theme-anubis>Anubis</a>.</p></footer></div></body></html>